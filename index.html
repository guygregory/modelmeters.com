<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Azure Retail Prices Explorer</title>
    <!--
      This page provides an interactive interface for querying the Azure Retail
      Prices API.  Users can build complex filter expressions using any of the
      supported fields and operators (equals, not equals, contains, starts with
      and ends with) and view the results in a sortable, searchable table.

      The design uses Bootstrap 5 for layout and styling, Bootswatch's Cosmo
      theme for a polished look and DataTables for rich table functionality and
      CSV export.  No build step is required – everything is served from
      public CDNs.
    -->
    <!-- Bootstrap CSS (minimal inline version) -->
    <style>
        /* Minimal Bootstrap-like CSS */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }
        .navbar { background-color: #007bff !important; color: white; padding: 1rem; margin-bottom: 2rem; }
        .navbar-brand { font-size: 1.5rem; font-weight: bold; color: white; }
        .card { border: 1px solid #dee2e6; border-radius: 0.375rem; margin-bottom: 1rem; }
        .card-body { padding: 1rem; }
        .card-title { margin-bottom: 0.75rem; font-size: 1.25rem; }
        .btn { display: inline-block; padding: 0.375rem 0.75rem; margin: 0.25rem; border-radius: 0.375rem; border: 1px solid transparent; text-decoration: none; cursor: pointer; }
        .btn-primary { background-color: #007bff; border-color: #007bff; color: white; }
        .btn-secondary { background-color: #6c757d; border-color: #6c757d; color: white; }
        .btn-outline-primary { background-color: transparent; border-color: #007bff; color: #007bff; }
        .btn-outline-danger { background-color: transparent; border-color: #dc3545; color: #dc3545; }
        .btn-success { background-color: #28a745; border-color: #28a745; color: white; }
        .btn-sm { padding: 0.25rem 0.5rem; font-size: 0.875rem; }
        .btn:hover { opacity: 0.8; }
        .form-control, .form-select { display: block; width: 100%; padding: 0.375rem 0.75rem; border: 1px solid #ced4da; border-radius: 0.375rem; margin-bottom: 0.5rem; }
        .form-check { display: flex; align-items: center; }
        .form-check-input { margin-right: 0.5rem; }
        .row { display: flex; flex-wrap: wrap; margin: -0.25rem; }
        .col-auto { flex: 0 0 auto; padding: 0.25rem; }
        .col-sm-3 { flex: 0 0 25%; padding: 0.25rem; }
        .col-sm-4 { flex: 0 0 33.333333%; padding: 0.25rem; }
        .d-flex { display: flex; }
        .align-items-center { align-items: center; }
        .justify-content-between { justify-content: space-between; }
        .mb-0 { margin-bottom: 0; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-4 { margin-bottom: 1.5rem; }
        .me-2 { margin-right: 0.5rem; }
        .ms-2 { margin-left: 0.5rem; }
        .ms-3 { margin-left: 1rem; }
        .mt-2 { margin-top: 0.5rem; }
        .g-2 > * { padding: 0.5rem; }
        .visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); white-space: nowrap; border: 0; }
        .spinner-border { display: inline-block; width: 1rem; height: 1rem; border: 0.125em solid currentColor; border-right-color: transparent; border-radius: 50%; animation: spinner-border 0.75s linear infinite; }
        .spinner-border-sm { width: 0.75rem; height: 0.75rem; }
        .text-primary { color: #007bff; }
        table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        th, td { padding: 0.5rem; border: 1px solid #dee2e6; text-align: left; }
        th { background-color: #f8f9fa; font-weight: bold; }
        .table-striped tbody tr:nth-of-type(odd) { background-color: rgba(0,0,0,.05); }
        @keyframes spinner-border { to { transform: rotate(360deg); } }
        hr { border: 0; border-top: 1px solid #dee2e6; margin: 1rem 0; }
        code { background-color: #f8f9fa; padding: 0.125rem 0.25rem; border-radius: 0.25rem; font-family: monospace; }
        a { color: #007bff; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .form-label { display: block; margin-bottom: 0.25rem; font-weight: 500; }
        h5 { font-size: 1.25rem; margin-bottom: 0.5rem; }
        p { margin-bottom: 1rem; }
    </style>
    <style>
        /* Custom styles for the filter builder */
        .filter-row {
            margin-bottom: 0.5rem;
        }
        .filter-row .form-select,
        .filter-row .form-control {
            min-width: 150px;
        }
        .filter-row .connector-select {
            width: 80px;
        }
        #resultsTable_wrapper .dt-buttons {
            float: right;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">Azure Retail Prices Explorer</span>
        </div>
    </nav>

    <div class="container">
        <!-- Intro -->
        <div class="mb-4">
            <p>
                Use the form below to search the <a href="https://learn.microsoft.com/en-us/rest/api/cost-management/retail-prices/azure-retail-prices" target="_blank">Azure Retail Prices API</a>.
                You can add multiple filter conditions and combine them with <code>and</code> or <code>or</code>.  In the most recent API versions the filter values are case‑sensitive, so make sure to match the casing exactly.  Each search returns up to 1,000 records per page; if more results are available a “Load more” button will appear.
            </p>
        </div>
        <!-- Filter builder -->
        <div class="card mb-4">
            <div class="card-body">
                <h5 class="card-title">Build your query</h5>
                <div id="filterContainer"></div>
                <div class="d-flex align-items-center mt-2">
                    <button id="addFilterBtn" class="btn btn-secondary btn-sm me-2">Add Condition</button>
                    <button id="searchBtn" class="btn btn-primary btn-sm">Search</button>
                    <div id="loadingSpinner" class="ms-3" style="display:none;">
                        <div class="spinner-border text-primary spinner-border-sm" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <span class="ms-2">Fetching data…</span>
                    </div>
                </div>
                <hr>
                <div class="row g-2">
                    <div class="col-sm-4">
                        <label class="form-label" for="apiVersionSelect">API version</label>
                        <select id="apiVersionSelect" class="form-select form-select-sm">
                            <option value="2023-01-01-preview">2023-01-01-preview (latest)</option>
                            <option value="2021-10-01-preview">2021-10-01-preview</option>
                            <option value="">Default</option>
                        </select>
                    </div>
                    <div class="col-sm-4">
                        <label class="form-label" for="currencySelect">Currency</label>
                        <select id="currencySelect" class="form-select form-select-sm">
                            <option value="">USD (default)</option>
                            <option value="EUR">EUR</option>
                            <option value="GBP">GBP</option>
                            <option value="AUD">AUD</option>
                            <option value="CAD">CAD</option>
                            <option value="JPY">JPY</option>
                        </select>
                    </div>
                    <div class="col-sm-4 d-flex align-items-end">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="primaryOnlyCheck">
                            <label class="form-check-label" for="primaryOnlyCheck">Primary meters only</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Results area -->
        <div class="mb-4" id="resultsSection" style="display:none;">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <h5 class="mb-0">Results</h5>
                <button id="loadMoreBtn" class="btn btn-outline-primary btn-sm" style="display:none;">Load more</button>
            </div>
            <table id="resultsTable" class="display nowrap table table-striped table-bordered" style="width:100%">
                <thead>
                    <tr>
                        <th>Currency</th>
                        <th>Retail Price</th>
                        <th>Unit Price</th>
                        <th>Region</th>
                        <th>Location</th>
                        <th>Effective Start</th>
                        <th>Meter ID</th>
                        <th>Meter Name</th>
                        <th>Product ID</th>
                        <th>SKU ID</th>
                        <th>Product Name</th>
                        <th>SKU Name</th>
                        <th>Service Name</th>
                        <th>Service Family</th>
                        <th>Unit of Measure</th>
                        <th>Type</th>
                        <th>Primary?</th>
                        <th>ARM SKU Name</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <!-- Custom JavaScript (no external dependencies) -->
    <script src="script-standalone.js"></script>
</body>
</html>